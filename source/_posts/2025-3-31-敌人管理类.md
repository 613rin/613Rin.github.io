---
title: Unityæ•Œäººç®¡ç†ç³»ç»Ÿ
date: 2025-3-28 11:54
update: 2025-3-29 14:00
cover: https://pic-bed-5pz.pages.dev/img/7.jpg
description: Unityæ•Œäººç®¡ç†ç³»ç»Ÿ
swiper_index: 12 #ç½®é¡¶è½®æ’­å›¾é¡ºåºï¼Œéè´Ÿæ•´æ•°ï¼Œæ•°å­—è¶Šå¤§è¶Šé å‰
---

# Unityä¸­çš„æ•Œäººç®¡ç†ç³»ç»Ÿï¼šåŸç†ä¸å®è·µ

![Unity Enemy Management](https://example.com/unity-enemy-system.jpg)  
*æ•Œäººç®¡ç†ç³»ç»Ÿæ¶æ„ç¤ºæ„å›¾*

åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œæ•Œäººç®¡ç†æ˜¯ä¸€ä¸ªå¤æ‚è€Œå…³é”®çš„ç³»ç»Ÿï¼Œå®ƒéœ€è¦åè°ƒå¤šä¸ªæ•Œäººçš„è¡Œä¸ºã€çŠ¶æ€å’Œä¸ç©å®¶çš„äº¤äº’ã€‚æœ¬æ–‡å°†æ·±å…¥è§£ææ•Œäººç®¡ç†ç³»ç»Ÿçš„è®¾è®¡åŸç†ä¸å®ç°ç»†èŠ‚ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### å•ä¾‹æ¨¡å¼å®ç°
```csharp
public class EnemyManger : Singleton<EnemyManger>
{
    private Transform _mainPlayer;
    [SerializeField, Header("æ‰€æœ‰çš„æ•Œäºº")] 
    private List<GameObject> _allEnemy = new List<GameObject>();
    
    [SerializeField, Header("æ¿€æ´»ç€çš„æ•Œäºº")] 
    private List<GameObject> _activeEnemy = new List<GameObject>();
    
    private WaitForSeconds _waitTime;
}
```

å…³é”®è®¾è®¡ç‰¹ç‚¹ï¼š
- ğŸ”’ å…¨å±€å•ä¾‹è®¿é—®ç‚¹
- ğŸ“‹ åŒåˆ—è¡¨ç®¡ç†ï¼ˆå…¨é‡+æ´»è·ƒï¼‰
- ğŸ› ï¸ ç¼–è¾‘å™¨å‹å¥½é…ç½®

## â™»ï¸ æ•Œäººç”Ÿå‘½å‘¨æœŸç®¡ç†

### å®Œæ•´ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾
```mermaid
graph TD
    A[ç”Ÿæˆ] --> B[æ¿€æ´»åˆ—è¡¨]
    B --> C{çŠ¶æ€æ£€æµ‹}
    C -->|æ­»äº¡/å¤±æ•ˆ| D[ç§»é™¤å¤„ç†]
    C -->|æ´»è·ƒ| E[è¡Œä¸ºæ›´æ–°]
    D --> F[èµ„æºå›æ”¶]
```

### ä»£ç å®ç°
```csharp
public void RemoveEnemyUnit(GameObject obj)
{
    Debug.Log($"ç§»é™¤æ•Œäºº: {obj?.name}");
    
    if (obj == null) return;
    
    if (_activeEnemy.Contains(obj))
    {
        DisableEnemyComponents(obj); // å…³é”®æ­¥éª¤ï¼
        _activeEnemy.Remove(obj);
    }
}
```

ç¦ç”¨ç»„ä»¶æ ‡å‡†æµç¨‹ï¼š
1. ç§»åŠ¨æ§åˆ¶ç»„ä»¶
2. æˆ˜æ–—è„šæœ¬
3. æ‰€æœ‰ç¢°æ’ä½“
4. è®¾ç½®æ­»äº¡åŠ¨ç”»æ ‡å¿—

## ğŸ¤– AIè¡Œä¸ºæ§åˆ¶ç³»ç»Ÿ

### æ”»å‡»æŒ‡ä»¤åˆ†å‘ç®—æ³•
```csharp
IEnumerator EnableEnemyAttackCommand()
{
    while (_activeEnemy.Count > 0)
    {
        CleanInvalidEnemies(); // æ¸…ç†æ— æ•ˆæ•Œäºº
        
        if (_activeEnemy.Count == 0) break;
        
        GameObject attacker = SelectRandomAttacker();
        if (attacker.TryGetComponent<EnemyCombatt>(out var combat))
        {
            combat._attackcommand = true;
        }
     
        yield return _waitTime; // æ§åˆ¶æ”»å‡»é¢‘ç‡
    }
}
```

AIæ§åˆ¶å‚æ•°è¡¨ï¼š

| å‚æ•° | ä½œç”¨ | æ¨èå€¼ |
|------|------|--------|
| `_waitTime` | æ”»å‡»é—´éš” | 1.5-3.0s |
| éšæœºé€‰æ‹© | æ”»å‡»è€…é€‰æ‹© | å‡åŒ€åˆ†å¸ƒ |
| çŠ¶æ€æ£€æŸ¥ | æ­»äº¡æ£€æµ‹ | æ¯å¸§æ‰§è¡Œ |

## ğŸ® å…¨å±€è¡Œä¸ºæ§åˆ¶

### ç‰¹æ®Šåœºæ™¯å¤„ç†
```csharp
// å¤„å†³åŠ¨ç”»æœŸé—´
public void StopAllEnemies()
{
    foreach (var e in _activeEnemy)
    {
        if (e.TryGetComponent<EnemyCombatt>(out var combat))
        {
            combat.StopAttackCommand();
        }
    }
}
```

ä½¿ç”¨åœºæ™¯ï¼š
- ğŸ¬ è¿‡åœºåŠ¨ç”»
- âœ¨ ç‰¹æ®ŠæŠ€èƒ½é‡Šæ”¾
- ğŸ’€ ç©å®¶å¤„å†³æ—¶åˆ»

## ğŸ”— ç³»ç»Ÿé›†æˆè®¾è®¡

### ä¸ç©å®¶ç³»ç»Ÿçš„äº¤äº’
```csharp
// ç©å®¶æˆ˜æ–—ç³»ç»Ÿ
EnemyManger.MainInstance.StopAllEnemies();
GameEventMag.MainInstance.CallEvent("æ•Œäººæ­»äº¡", enemyTransform);
```

é›†æˆæ–¹å¼ï¼š
1. **ç›´æ¥è°ƒç”¨**ï¼šé€šè¿‡å•ä¾‹è®¿é—®
2. **äº‹ä»¶é©±åŠ¨**ï¼šä½¿ç”¨æ¶ˆæ¯ç³»ç»Ÿ
3. **ç»„ä»¶æŸ¥è¯¢**ï¼šGetComponentæ¨¡å¼

## ğŸ§  è®¾è®¡æ¨¡å¼åº”ç”¨

| æ¨¡å¼ | åº”ç”¨åœºæ™¯ | å®ç°ç¤ºä¾‹ |
|------|----------|----------|
| å•ä¾‹ | å…¨å±€è®¿é—® | `EnemyManger.Instance` |
| è§‚å¯Ÿè€… | äº‹ä»¶é€šçŸ¥ | `CallEvent("æ•Œäººæ­»äº¡")` |
| çŠ¶æ€ | ç”Ÿå‘½å‘¨æœŸ | `IsDead`æ ‡å¿—ä½ |
| ç»„ä»¶ | åŠŸèƒ½åˆ†ç¦» | ç§»åŠ¨/æˆ˜æ–—/å¥åº·ç»„ä»¶ |

## ğŸš€ æ€§èƒ½ä¼˜åŒ–æŠ€å·§

1. **å¯¹è±¡æ± ç®¡ç†**ï¼š
   ```csharp
   EnemyPool.Instance.Recycle(enemy);
   ```
   
2. **è·ç¦»æ£€æµ‹ä¼˜åŒ–**ï¼š
   ```csharp
   if(Vector3.Distance() > threshold) return;
   ```

3. **åˆ†å¸§å¤„ç†**ï¼š
   ```csharp
   yield return new WaitForEndOfFrame();
   ```

## ğŸ”® æ‰©å±•æ–¹å‘

### æ•Œäººç±»å‹æ‰©å±•æ¶æ„
```mermaid
classDiagram
    EnemyBase <|-- MeleeEnemy
    EnemyBase <|-- RangeEnemy
    EnemyBase <|-- BossEnemy
    
    class EnemyBase{
        +HealthSystem health
        +Move() virtual
        +Attack() virtual
    }
```

æ‰©å±•å»ºè®®ï¼š
1. è¡Œä¸ºæ ‘é›†æˆ
2. éš¾åº¦åŠ¨æ€è°ƒæ•´
3. é˜µè¥ç³»ç»Ÿæ·»åŠ 

## ğŸ“ æ€»ç»“ä¸æœ€ä½³å®è·µ

æ ¸å¿ƒåŸåˆ™ï¼š
- ğŸ§© **æ¨¡å—åŒ–è®¾è®¡**ï¼šåŠŸèƒ½åˆ†ç¦»ï¼ŒèŒè´£å•ä¸€
- âš¡ **æ€§èƒ½æ„è¯†**ï¼šåŠæ—¶æ¸…ç†ï¼Œä¼˜åŒ–æ£€æµ‹
- ğŸ® **ä½“éªŒä¼˜å…ˆ**ï¼šåˆç†çš„AIéš¾åº¦æ›²çº¿
- ğŸ”„ **çµæ´»æ‰©å±•**ï¼šé¢„ç•™æ¥å£ï¼Œæ–¹ä¾¿è¿­ä»£

> "ä¼˜ç§€çš„æ•Œäººç®¡ç†ç³»ç»Ÿåº”è¯¥åƒäº¤å“ä¹æŒ‡æŒ¥â€”â€”æ¯ä¸ªæ•Œäººéƒ½ç‹¬ç«‹æ¼”å¥ï¼Œä½†æ•´ä½“å’Œè°ç»Ÿä¸€ã€‚" â€” èµ„æ·±æ¸¸æˆå¼€å‘è€…

---

**ğŸ“š æ¨èé˜…è¯»**ï¼š
- [Unityå®˜æ–¹AIæ•™ç¨‹](https://learn.unity.com/topic/artificial-intelligence)
- [æ¸¸æˆç¼–ç¨‹æ¨¡å¼](https://gameprogrammingpatterns.com/)
- [è¡Œä¸ºæ ‘å®ç°æŒ‡å—](https://www.behaviordesigner.com/)


